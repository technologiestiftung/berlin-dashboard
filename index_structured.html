<!DOCTYPE html>
<html>
<head>
  <title>Embedding Vega-Lite</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@3.0.10"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@2.1.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@3.0.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-tooltip"></script>

  <script sc="specs/stacked_area_lite.json"></script>

  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/vega-tooltip/build/vega-tooltip.min.css">
  <link rel="stylesheet" href="https://unpkg.com/tachyons@4.9.1/css/tachyons.min.css"/>
  <link rel="stylesheet" href="style.css"/>
</head>


<body class="bg-light-gray">

  <svg class="logo-tsb" width="158px" height="47px" viewBox="0 0 158 47">

    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g transform="translate(-1719.000000, -33.000000)">
            <g transform="translate(1719.000000, 33.000000)">
                <use xlink:href="./assets/sprites.svg#tsb-logo"/>
                <polygon id="Fill-2" fill="#E40134" points="5.05273957 47 0 32.1422578 0.238021616 32 17 34.7499156 16.8698127 34.8846988"></polygon>
                <polygon id="Fill-3" fill="#71CBF4" points="11.5451905 8 59 28.9277047 53.520409 41 0 32.1324642"></polygon>
                <polygon id="Fill-4" fill="#63B9E9" points="0 32.2436278 47.0880333 4 54 41"></polygon>
                <polygon id="Fill-5" fill="#3192D0" points="0 32.0840217 27.9752849 15 51.0940739 25.1563605 54 41"></polygon>
                <polygon id="Fill-6" fill="#3A5BA7" points="0 32.2738983 47 4 16.7620398 35"></polygon>
                <polygon id="Fill-7" fill="#213A8F" points="0 32.2071895 27.5345766 15 33 17.4569071 16.5288807 35"></polygon>
            </g>
        </g>
    </g>
  </svg>

    <div class="wrapper w-80 center flex flex-column mt5">

        <div class="row row-1 flex flex-row">

            <div class="vis-wrapper">
                <div class="title-wrapper flex justify-space-around">
                    <span class="center v-mid">Berlin Arbeitslosenzahlen 2016</span>
                </div>

                <div id="vis-map"></div>

            </div>

            <div class="vis-wrapper">
                <div id="vis-bws"></div>
            </div>

        </div>

        <div class="row row-2 flex flex-row">
            <div id="vis-bip"></div>
            <div id="vis-inEuro"></div>
            <div id="vis-inTons"></div>
        </div>

    </div>
  


  <script type="text/javascript">

    var options = {
        showAllFields: false,
        fields: [
        {
            field: 'Name',
            title: 'Planungsraum',
            formatType: String
        },
        {
            field: 'S2',
            title: 'S2',
            formatType: Number
        },
        ],
        delay: 250,
        onAppear: function(event, item) { /* callback */ },
        onMove: function(event, item) { /* callback */ },
        onDisappear: function(event, item) { /* callback */ },
        colorTheme: "light"
    };

    const map = "./specs/unmplymnt_map.json";

    function renderCharts() {
        vegaEmbed("#vis-bws", "./specs/bws_stacked_area.json", { 'renderer': 'svg' });
        vegaEmbed("#vis-bip", "./specs/bip_line.json", { 'renderer': 'svg' });
        vegaEmbed("#vis-inEuro", "./specs/imprtEuro_line.json", { 'renderer': 'svg' });
        vegaEmbed("#vis-inTons", "./specs/imprtTons_line.json", { 'renderer': 'svg' });
        
        vegaEmbed("#vis-map", map , { 'renderer': 'svg' }).then( result => {
            console.log(vegaTooltip.vegaLite);
            // vegaTooltip.vegaLite(result.view, map, options);
        });

        const legend = document.querySelectorAll('.vega-actions');
            legend.forEach( item => {
            item.style.display = 'none';
        })
    }

    renderCharts();

    window.addEventListener('resize', function() {
      map.width = window.innerWidth;
    })

  </script>
</body>
</html>